{"code":"!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);class s{constructor(e){this.url=e.url,console.log(this.url),this.headers=e.headers}requestUserInfo(){return fetch(this.url+\"/users/me\",{method:\"GET\",headers:this.headers}).then(e=>this.checkStatus(e))}getInitialCards(){return fetch(this.url+\"/cards\",{method:\"GET\",headers:this.headers}).then(e=>this.checkStatus(e))}updateUserInfo(e,t,n){return fetch(this.url+\"/users/me\",{method:\"PATCH\",headers:this.headers,body:JSON.stringify({name:e,about:t,avatar:n})}).then(e=>this.checkStatus(e))}checkStatus(e){return e.ok?Promise.resolve(e.json()):Promise.reject(e.status)}}class i{constructor(e){this.like=this.like.bind(this),this.remove=this.remove.bind(this),this.removeListeners=this.removeListeners.bind(this),this.onImageClick=this.onImageClick.bind(this);const t=document.createElement(\"div\"),n=document.createElement(\"div\"),s=document.createElement(\"button\"),i=document.createElement(\"div\"),o=document.createElement(\"h3\"),r=document.createElement(\"button\");this.element=t,this.elementImage=n,this.imageButton=s,this.elementDescription=i,this.elementDescriptionName=o,this.likeButton=r,this.openPicture=e}like(){this.likeButton.classList.toggle(\"place-card__like-icon_liked\")}create(e){return this.element.classList.add(\"place-card\"),this.elementImage.classList.add(\"place-card__image\"),this.elementImage.style.backgroundImage=`url('${e.link}')`,this.element.appendChild(this.elementImage),this.imageButton.classList.add(\"place-card__delete-icon\"),this.elementImage.appendChild(this.imageButton),this.elementDescription.classList.add(\"place-card__description\"),this.element.appendChild(this.elementDescription),this.elementDescriptionName.classList.add(\"place-card__name\"),this.elementDescriptionName.textContent=e.name,this.elementDescription.appendChild(this.elementDescriptionName),this.likeButton.classList.add(\"place-card__like-icon\"),this.elementDescription.appendChild(this.likeButton),this.setListeners(),this.element}remove(){this.removeListeners(),this.element.remove()}setListeners(){this.likeButton.addEventListener(\"click\",this.like),this.imageButton.addEventListener(\"click\",this.remove),this.elementImage.addEventListener(\"click\",this.onImageClick)}onImageClick(e){this.openPicture(e.target.style.backgroundImage.split('url(\"')[1].slice(0,-2))}removeListeners(){this.likeButton.removeEventListener(\"click\",this.like),this.imageButton.removeEventListener(\"click\",this.remove),this.elementImage.removeEventListener(\"click\",this.onImageClick)}}class o{constructor(e,t,n){this.container=e,this.openPicture=n,this.createCard=t}addCard(e){let t=this.createCard(this.openPicture).create(e);this.container.appendChild(t)}render(e){this.initialArray=e,this.initialArray.forEach(e=>this.addCard(e))}}class r{constructor(e){this.popup=e,this.buttonClose=this.popup.querySelector(\".popup__close\"),this.openPopup=this.openPopup.bind(this),this.setListener=this.setListener.bind(this),this.closePopup=this.closePopup.bind(this),this.setListener()}openPopup(){this.popup.classList.add(\"popup_is-opened\")}closePopup(){this.popup.classList.remove(\"popup_is-opened\")}setListener(){this.buttonClose.addEventListener(\"click\",this.closePopup)}}class a{constructor(e,t,n,s){this.form=e,this.nameField=t,this.occupationField=n,this.avatarField=s,this.setUserInfo=this.setUserInfo.bind(this),this.updateUserInfo=this.updateUserInfo.bind(this)}setUserInfo(){this.form.elements.fullName.value=this.nameField.textContent,this.form.elements.occupation.value=this.occupationField.textContent}updateUserInfo(e,t,n){this.nameField.textContent=e,this.occupationField.textContent=t,this.avatarField.style.backgroundImage=`url('${n}')`}}!function(){const e=document.querySelector(\".places-list\"),t=document.forms.new,n=t.elements.name,c=t.elements.link,l=new FormValidator(t);l.setEventListeners();const u=document.forms.editForm,d=u.elements.fullName,h=u.elements.occupation,p=new FormValidator(u);p.setEventListeners();const m=document.querySelector(\".popup_image\"),f=document.querySelector(\".popup_edit\"),v=document.querySelector(\".popup_cards\"),g=new ImagePopup(m),b=new r(f),k=new r(v),_=document.querySelector(\".user-info__name\"),y=document.querySelector(\".user-info__job\"),I=document.querySelector(\".user-info__photo\"),L=(document.querySelector(\".popup__image-large\"),new o(e,(...e)=>new i(...e),g.openPopup)),C=new a(u,_,y,I),P=new s({url:\"https://praktikum.tk/cohort11\",headers:{authorization:\"958efbfd-3413-4c9f-91d4-cc966f71b0c9\",\"Content-Type\":\"application/json\"}});P.requestUserInfo().then(e=>C.updateUserInfo(e.name,e.about,e.avatar)).catch(e=>console.log(e)),P.getInitialCards().then(e=>L.render(e)).catch(e=>console.log(e)),document.querySelector(\".user-info__button\").addEventListener(\"click\",(function(){k.openPopup(),l.setSubmitButtonState(t.querySelector(\"button\"),!1)})),document.querySelector(\".user-info__edit-button\").addEventListener(\"click\",(function(){p.resetErrors(u),C.setUserInfo(),b.openPopup()})),t.addEventListener(\"submit\",(function(e){e.preventDefault();const s={};s.name=n.value,s.link=c.value,L.addCard(s),k.closePopup(),t.reset()})),u.addEventListener(\"submit\",(function(e){e.preventDefault(),P.updateUserInfo(d.value,h.value).then(e=>{console.log(e),C.updateUserInfo(e.name,e.about,e.avatar),C.setUserInfo(),b.closePopup()}).catch(e=>console.log(e))}))}()}]);","extractedComments":[]}